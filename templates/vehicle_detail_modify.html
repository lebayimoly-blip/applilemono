{% extends 'base.html' %}

{% block title %}Modifier les dÃ©tails du vÃ©hicule{% endblock %}

{% block content %}
  <div class="container bg-light p-4 rounded shadow-sm">
    <h1 class="text-center mb-4">ğŸ”§ Modifier le vÃ©hicule {{ vehicle.plate }}</h1>

    {% if vehicle.photo %}
      <div class="photo-preview text-center mb-4">
        <p>ğŸ“¸ Photo actuelle :</p>
        <img src="{{ url_for('static', filename='uploads/' ~ vehicle.photo) }}" alt="Photo du vÃ©hicule" class="img-fluid" style="max-width:300px;">
      </div>
    {% endif %}

    <form method="post" enctype="multipart/form-data" class="mb-4">
      <div class="mb-3">
        <label for="owner" class="form-label">PropriÃ©taire :</label>
        <input type="text" id="owner" name="owner" value="{{ vehicle.owner }}" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="insurance_expiry" class="form-label">Date d'expiration de l'assurance :</label>
        <input type="date" id="insurance_expiry" name="insurance_expiry" value="{{ vehicle.insurance_expiry }}" class="form-control" required>
      </div>

      <div class="mb-3">
        <label for="brand" class="form-label">Marque :</label>
        <input type="text" id="brand" name="brand" value="{{ vehicle.brand }}" class="form-control">
      </div>

      <div class="mb-3">
        <label for="model" class="form-label">ModÃ¨le :</label>
        <input type="text" id="model" name="model" value="{{ vehicle.model }}" class="form-control">
      </div>

      <div class="mb-3">
        <label for="first_registration" class="form-label">Date de premiÃ¨re immatriculation :</label>
        <input type="date" id="first_registration" name="first_registration" value="{{ vehicle.first_registration }}" class="form-control">
      </div>

      <div class="mb-3">
        <label for="maintenance_date" class="form-label">ğŸ› ï¸ Nouvelle date dâ€™entretien :</label>
        <input type="date" id="maintenance_date" name="maintenance_date" value="{{ vehicle.maintenance_date }}" class="form-control">
      </div>

      <div class="mb-3">
        <label for="photo" class="form-label">ğŸ“¸ Nouvelle photo du vÃ©hicule :</label>
        <input type="file" id="photo" name="photo" class="form-control">
      </div>

      <button type="submit" class="btn btn-success w-100">ğŸ’¾ Enregistrer les modifications</button>
    </form>

    {% if message %}
      <div class="message text-success text-center fw-bold">{{ message }}</div>
    {% endif %}

    <div class="back-link text-center mt-4">
      <a href="/search" class="btn btn-outline-primary">ğŸ”™ Retour Ã  la recherche</a>
    </div>
  </div>
{% endblock %}
